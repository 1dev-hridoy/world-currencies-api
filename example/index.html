<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Currencies</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-6 text-center">World Currencies</h1>
        <div class="mb-6">
            <input type="text" id="search" placeholder="Search by country" class="w-full p-2 border border-gray-300 rounded-md">
        </div>
        <div id="currencyList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- Currency items will be populated here -->
        </div>
    </div>

    <script>
        const currencyList = document.getElementById('currencyList');
        const searchInput = document.getElementById('search');
        let currencies = [];

        async function fetchCurrencies() {
            try {
                const response = await fetch('https://raw.githubusercontent.com/1dev-hridoy/world-currencies-api/refs/heads/main/world-currencies.json');
                currencies = await response.json();
                displayCurrencies(currencies);
            } catch (error) {
                console.error('Error fetching currencies:', error);
                currencyList.innerHTML = '<p class="text-red-500">Error loading currencies. Please try again later.</p>';
            }
        }

        function displayCurrencies(currenciesToShow) {
            currencyList.innerHTML = '';
            for (const [code, data] of Object.entries(currenciesToShow)) {
                const currencyItem = document.createElement('div');
                currencyItem.className = 'bg-white p-4 rounded-md shadow';
                currencyItem.innerHTML = `
                    <h2 class="font-bold">${data.name}</h2>
                    <p>${code} - ${data.symbol}</p>
                `;
                currencyList.appendChild(currencyItem);
            }
        }

        function searchCurrencies(query) {
            const filteredCurrencies = Object.fromEntries(
                Object.entries(currencies).filter(([_, data]) => 
                    data.name.toLowerCase().includes(query.toLowerCase())
                )
            );
            displayCurrencies(filteredCurrencies);
        }

        searchInput.addEventListener('input', (e) => searchCurrencies(e.target.value));

        fetchCurrencies();
    </script>
</body>
</html>